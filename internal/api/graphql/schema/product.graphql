

type Product {
    code: String
    createdAt: DateTime!
    id: ID!
    isAvailable: Boolean!
    isDiscountable: Boolean!
    isHalal: Boolean!
    isVegan: Boolean!
    isVisible: Boolean!
    pieceCount: Int
    price: String!
    slug: String!

    # Generated based on Accept-Language header
    name: String!
    description: String

    category: ProductCategory!

    choices: [ProductChoice!]!

    # Admin only
    translations: [Translation!]!
}

type ProductChoice {
    id: ID!
    productId: ID!
    priceModifier: String!
    sortOrder: Int!
    name: String!
    translations: [ChoiceTranslation!]!
}

type ChoiceTranslation {
    locale: String!
    name: String!
}

type Translation {
    description: String
    language: String!
    name: String!
}

type ProductCategory {
    id: ID!
    order: Int!

    name: String!

    products: [Product!]!

    # Admin only
    translations: [Translation!]!
}

input CreateProductInput {
    categoryId: ID!
    code: String
    image: Upload
    isAvailable: Boolean!
    isDiscountable: Boolean!
    isHalal: Boolean!
    isVegan: Boolean!
    isVisible: Boolean!
    pieceCount: Int
    price: String!
    translations: [TranslationInput!]!
}

input UpdateProductInput {
    categoryID: ID
    code: String
    image: Upload
    isAvailable: Boolean
    isDiscountable: Boolean
    isHalal: Boolean
    isVegan: Boolean
    isVisible: Boolean
    pieceCount: Int
    price: String
    translations: [TranslationInput!]
}

input TranslationInput {
    description: String
    language: String!
    name: String!
}

input ChoiceTranslationInput {
    locale: String!
    name: String!
}

input CreateProductChoiceInput {
    productId: ID!
    priceModifier: String!
    sortOrder: Int!
    translations: [ChoiceTranslationInput!]!
}

input UpdateProductChoiceInput {
    priceModifier: String
    sortOrder: Int
    translations: [ChoiceTranslationInput!]
}

extend type Query {
    product(id: ID!): Product!
    products: [Product!]!

    productCategory(id: ID!): ProductCategory!
    productCategories: [ProductCategory!]!
}

extend type Mutation {
    createProduct (
        input: CreateProductInput!
    ): Product! @admin

    updateProduct(
        id: ID!
        input: UpdateProductInput!
    ): Product! @admin

    createProductChoice(
        input: CreateProductChoiceInput!
    ): ProductChoice! @admin

    updateProductChoice(
        id: ID!
        input: UpdateProductChoiceInput!
    ): ProductChoice! @admin

    deleteProductChoice(
        id: ID!
    ): Boolean! @admin
}
